Voici un **r√©sum√© complet des commandes et concepts SQL essentiels** pour la gestion des bases de donn√©es, que ce soit pour modifier, ajouter, supprimer des tables/colonnes, ou cr√©er des conditions. Ce guide couvre les syntaxes cl√©s, les bonnes pratiques et les pi√®ges √† √©viter.

---

### **1. Gestion des Tables (DDL - Langage de D√©finition de Donn√©es)**
#### **Cr√©er une table**
```sql
CREATE TABLE NomTable (
    Colonne1 TYPE Contraintes,
    Colonne2 TYPE Contraintes,
    ...
);
```
**Exemple :**
```sql
CREATE TABLE Employ√©s (
    ID INT PRIMARY KEY,
    Nom VARCHAR(50) NOT NULL,
    Salaire DECIMAL(10,2) CHECK (Salaire > 0),
    DepartementID INT,
    FOREIGN KEY (DepartementID) REFERENCES Departements(ID)
);
```

#### **Modifier une table**
- **Ajouter une colonne** :
  ```sql
  ALTER TABLE NomTable ADD Colonne TYPE Contraintes;
  ```
  Exemple :
  ```sql
  ALTER TABLE Employ√©s ADD Email VARCHAR(100);
  ```

- **Supprimer une colonne** :
  ```sql
  ALTER TABLE NomTable DROP COLUMN Colonne;
  ```
  Exemple :
  ```sql
  ALTER TABLE Employ√©s DROP COLUMN Email;
  ```

- **Modifier le type d‚Äôune colonne** :
  - **MySQL** :
    ```sql
    ALTER TABLE NomTable MODIFY Colonne NOUVEAU_TYPE [Contraintes];
    ```
    Exemple :
    ```sql
    ALTER TABLE Employ√©s MODIFY Salaire NUMERIC(12,2) NOT NULL;
    ```
  - **PostgreSQL** :
    ```sql
    ALTER TABLE NomTable ALTER COLUMN Colonne TYPE NOUVEAU_TYPE USING (Colonne::NOUVEAU_TYPE);
    ```
    Exemple :
    ```sql
    ALTER TABLE Employ√©s ALTER COLUMN Salaire TYPE NUMERIC(12,2) USING (Salaire::NUMERIC(12,2));
    ```

#### **Supprimer une table**
```sql
DROP TABLE NomTable;
```
> ‚ö†Ô∏è **Attention** : Cette commande supprime d√©finitivement la table et ses donn√©es.

---

### **2. Gestion des Donn√©es (DML - Langage de Manipulation de Donn√©es)**
#### **Ins√©rer des donn√©es**
```sql
INSERT INTO NomTable (Col1, Col2, ...) VALUES (Val1, Val2, ...);
```
**Exemple :**
```sql
INSERT INTO Employ√©s (ID, Nom, Salaire, DepartementID) 
VALUES (1, 'Dupont', 5000.00, 3);
```

#### **Mettre √† jour des donn√©es**
```sql
UPDATE NomTable SET Colonne = Valeur WHERE Condition;
```
**Exemple :**
```sql
UPDATE Employ√©s SET Salaire = 5500.00 WHERE ID = 1;
```
> ‚ö†Ô∏è **Oublier le `WHERE` supprime toutes les lignes !**

#### **Supprimer des donn√©es**
```sql
DELETE FROM NomTable WHERE Condition;
```
**Exemple :**
```sql
DELETE FROM Employ√©s WHERE ID = 1;
```
> ‚ö†Ô∏è **Oublier le `WHERE` supprime toutes les lignes !**

---

### **3. Contraintes pour l'Int√©grit√© des Donn√©es**
| Contrainte       | Description                          | Exemple |
|------------------|--------------------------------------|---------|
| `PRIMARY KEY`    | Identifiant unique + NOT NULL        | `ID INT PRIMARY KEY` |
| `FOREIGN KEY`    | Lien avec une cl√© primaire d'une autre table | `FOREIGN KEY (DepartementID) REFERENCES Departements(ID)` |
| `NOT NULL`       | Interdit les valeurs nulles          | `Nom VARCHAR(50) NOT NULL` |
| `UNIQUE`         | Valeurs uniques dans la colonne      | `Email VARCHAR(100) UNIQUE` |
| `CHECK`          | Condition sur les valeurs            | `CHECK (Salaire > 0)` |
| `DEFAULT`        | Valeur par d√©faut                    | `Statut VARCHAR(20) DEFAULT 'Actif'` |

---

### **4. Conditions et Filtres (WHERE, JOIN, GROUP BY)**
#### **Filtrer avec `WHERE`**
```sql
SELECT * FROM Employ√©s WHERE Salaire > 5000;
```

#### **Op√©rateurs logiques**
- `AND`, `OR`, `NOT`
- `IN`, `BETWEEN`, `LIKE` (pour les motifs)
  ```sql
  SELECT * FROM Employ√©s WHERE Nom LIKE 'D%'; -- Noms commen√ßant par D
  ```

#### **Jointures (`JOIN`)**
- **INNER JOIN** : Donn√©es communes aux deux tables
  ```sql
  SELECT E.Nom, D.NomDepartement
  FROM Employ√©s E
  INNER JOIN Departements D ON E.DepartementID = D.ID;
  ```
- **LEFT JOIN** : Toutes les lignes de la table de gauche + correspondances
- **RIGHT JOIN** : Toutes les lignes de la table de droite + correspondances
- **FULL JOIN** : Toutes les lignes des deux tables (si disponible)

#### **Agr√©gation avec `GROUP BY`**
```sql
SELECT DepartementID, AVG(Salaire) AS SalaireMoyen
FROM Employ√©s
GROUP BY DepartementID
HAVING AVG(Salaire) > 4000;
```

---

### **5. Fonctions SQL Utiles**
| Fonction         | Description                          | Exemple |
|------------------|--------------------------------------|---------|
| `COUNT()`, `SUM()`, `AVG()` | Agr√©gation | `SELECT COUNT(*) FROM Employ√©s;` |
| `ROUND()`        | Arrondir un nombre                   | `SELECT ROUND(Salaire, 2);` |
| `CONCAT()`       | Concat√©ner des cha√Ænes               | `SELECT CONCAT(Nom, ' ', Pr√©nom);` |
| `DATE()`         | Extraire la date d‚Äôun datetime       | `SELECT DATE(DateNaissance);` |
| `CASE`           | Condition logique                    | ```sql CASE WHEN Salaire > 5000 THEN 'Haut' ELSE 'Bas' END AS Categorie ``` |

---

### **6. Bonnes Pratiques**
1. **Toujours utiliser `WHERE` avec `UPDATE`/`DELETE`** pour √©viter de modifier/supprimer toutes les lignes.
2. **Sauvegarder les donn√©es avant des op√©rations destructrices** (ex : `DROP TABLE`).
3. **Utiliser des transactions** pour groupes d‚Äôop√©rations critiques :
   ```sql
   START TRANSACTION;
   UPDATE Comptes SET Solde = Solde - 100 WHERE ID = 1;
   UPDATE Comptes SET Solde = Solde + 100 WHERE ID = 2;
   COMMIT; -- Ou ROLLBACK en cas d'erreur
   ```
4. **Indexer les colonnes fr√©quemment utilis√©es dans les clauses `WHERE` ou `JOIN`** pour am√©liorer les performances :
   ```sql
   CREATE INDEX idx_nom ON Employ√©s(Nom);
   ```

---

### **7. Diff√©rences Cl√©s entre SGBD**
| Op√©ration                | MySQL                  | PostgreSQL              |
|--------------------------|------------------------|-------------------------|
| Modifier le type d‚Äôune colonne | `MODIFY`               | `ALTER COLUMN ... TYPE` |
| Renommer une colonne     | `CHANGE`               | `ALTER COLUMN ... RENAME TO` |
| Auto-incr√©mentation      | `AUTO_INCREMENT`       | `SERIAL`                |
| Requ√™tes JSON            | `JSON`                 | `JSONB` (stockage binaire) |

---

### **8. R√©sum√© Visuel**
| Action                 | Commande SQL                     |
|------------------------|----------------------------------|
| Cr√©er une table        | `CREATE TABLE`                   |
| Modifier une table     | `ALTER TABLE`                    |
| Supprimer une table    | `DROP TABLE`                     |
| Ins√©rer des donn√©es    | `INSERT INTO`                    |
| Mettre √† jour des donn√©es | `UPDATE ... SET ... WHERE`     |
| Supprimer des donn√©es  | `DELETE FROM ... WHERE`          |
| Filtrer des r√©sultats  | `WHERE`, `HAVING`                |
| Joindre des tables     | `INNER JOIN`, `LEFT JOIN`        |
| Regrouper des donn√©es  | `GROUP BY`                       |
| Contraintes            | `PRIMARY KEY`, `FOREIGN KEY`, `CHECK`, `UNIQUE` |

---

Souhaites-tu un exercice pratique pour appliquer ces concepts ? üòä
